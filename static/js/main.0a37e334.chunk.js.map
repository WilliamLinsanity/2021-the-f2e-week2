{"version":3,"sources":["components/Header.js","assets/images/logo.png","constants.js","components/Map.js","assets/images/union.svg","assets/images/search.svg","components/SearchBlock.js","components/redux/reduce.js","App.js","reportWebVitals.js","index.js"],"names":["Container","styled","div","LogoBtn","img","HeaderBtnGroup","HeaderBtn","button","Header","btnList","name","value","isActive","isActiveItem","handleChangeActive","useState","src","map","item","onClick","handleClick","forEach","className","constant","spotIcon","L","icon","iconSize","iconAnchor","popupAnchor","iconUrl","shadowUrl","positionIcon","Map","_path","currentLocation","setCurrentLocation","markers","setMarkers","stations","useSelector","state","currentStationInfo","statusList","code","status","mapRef","useRef","popupRef","useEffect","navigator","geolocation","getCurrentPosition","position","coords","latitude","longitude","current","setView","userMarker","marker","constants","addLayer","length","Marker","StationPosition","PositionLat","PositionLon","Popup","ref","StationName","Zh_tw","StationAddress","UpdateTime","slice","replace","ServiceStatus","find","element","AvailableRentBikes","AvailableReturnBikes","StationUID","flyTo","open","setLatLng","console","log","MapContainer","useFlyTo","zoom","center","scrollWheelZoom","whenCreated","mapInstance","TileLayer","attribution","url","chunkedLoading","iconCreateFunction","cluster","divIcon","html","getChildCount","point","_extends","Object","assign","target","i","arguments","source","key","prototype","hasOwnProperty","call","apply","this","SvgUnion","_ref","svgRef","title","titleId","props","width","height","viewBox","fill","xmlns","id","d","ForwardRef","SvgSearch","fillRule","clipRule","SearchContainer","SearchWrapper","SearchBar","SearchTop","SearchResult","SearchResultItem","SerachInput","input","SearchFooter","SearchCountyList","SearchBtn","SearchPagination","Pagination","CarouselArrowRight","CarouselArrowLeft","SearchBlock","dispatch","useDispatch","keyword","setKeyword","bikesInfoList","getBikesInfoList","bikesAvailableList","getBikeAvailableList","selectedCounty","handleSelect","label","stationsList","getStationsList","arrowNumber","handleArrow","isLeftArrowVisible","handleLeftArrowVisible","isRightArrowVisible","handleRightArrowVisible","blockSelected","cityList","ptxURL","getAuthorizationHeader","GMTString","Date","toGMTString","ShaObj","jsSHA","setHMACKey","update","getHMAC","type","payload","splitArray","len","push","handleNumberChange","defaultValue","placeholder","onChange","e","options","async","fetch","headers","then","res","json","response","catch","error","handleSearch","isArrowVisible","event","style","display","GET_BIKES_INFORMATION_LIST","SET_CURRENT_STATION","initState","reduce","action","arr","idx","findIndex","store","createStore","App","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.0a37e334.chunk.js","sourcesContent":["import styled from \"@emotion/styled\";\r\nimport { useState } from \"react\";\r\nimport logo from '../assets/images/logo.png'\r\n// import findBtn from '../assets/images/findBtn.png'\r\nconst Container = styled.div`\r\ndisplay: flex;\r\njustify-content: space-between;\r\nbackground-color: #FFFFFF;\r\nheight: 80px;\r\npadding:0 120px 0 32px;\r\n`\r\nconst LogoBtn = styled.img``\r\nconst HeaderBtnGroup = styled.div`\r\n\r\n`\r\nconst HeaderBtn = styled.button`\r\n    font-size: 16px;\r\n    background-color: #FFFFFF;\r\n    color: #0E5978;\r\n    font-weight: bold;\r\n    &:hover{\r\n        background: #F0F9FC;\r\n        color: #12749D;\r\n    }\r\n\r\n    &.active{\r\n        background: #0E5978;\r\n        color: #FFFFFF;\r\n    }\r\n\r\n    border-radius: 4px;\r\n    padding: 8px 16px;\r\n    margin: 20px 6px;\r\n    border:0;\r\n`\r\n\r\nconst Header = () =>{\r\n    const btnList = [{name:'尋找單車',value:'bike',isActive:false},{name:'尋找車道',value:'road',isActive:false}]\r\n    const [isActiveItem,handleChangeActive] = useState('')\r\n    const handleClick = (value) =>{\r\n        btnList.forEach((item) => {\r\n            if(item.value === value){\r\n                handleChangeActive(item.value)\r\n            }\r\n        })\r\n    }\r\n   \r\n    return(\r\n        <Container>\r\n            <LogoBtn src={logo}/>\r\n            <HeaderBtnGroup>\r\n                {\r\n                    btnList.map(item=>(\r\n                        <HeaderBtn onClick={() =>handleClick(item.value)} className={item.value === isActiveItem? 'active': ''} key={item.value}>\r\n                            {item.name}\r\n                        </HeaderBtn>\r\n                    ))\r\n                }           \r\n            </HeaderBtnGroup>\r\n        </Container>\r\n    )\r\n}\r\nexport default Header;","export default \"data:image/png;base64,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\"","import L from \"leaflet\";\r\nconst constant = {\r\n   spotIcon :new L.icon({\r\n    iconSize: [25, 41],\r\n    iconAnchor: [10, 41],\r\n    popupAnchor: [2, -40],\r\n    iconUrl: \"https://unpkg.com/leaflet@1.6/dist/images/marker-icon-2x.png\",\r\n    shadowUrl: \"https://unpkg.com/leaflet@1.6/dist/images/marker-shadow.png\"\r\n  }),\r\n  positionIcon : new L.icon({\r\n    iconSize: [25, 41],\r\n    iconAnchor: [10, 41],\r\n    popupAnchor: [2, -40],\r\n    iconUrl:\"https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-2x-red.png\",\r\n    shadowUrl: \"https://unpkg.com/leaflet@1.6/dist/images/marker-shadow.png\"\r\n  })\r\n}\r\n\r\n\r\nexport default constant;","import React,{useEffect,useRef,useState} from 'react'\r\nimport \"leaflet/dist/leaflet.css\";\r\nimport 'react-leaflet-markercluster/dist/styles.min.css';\r\nimport L from \"leaflet\";\r\nimport \"leaflet.markercluster\";\r\nimport { TileLayer, Marker, Popup, MapContainer } from 'react-leaflet'\r\nimport constants from '../constants';\r\nimport MarkerClusterGroup from \"react-leaflet-markercluster\";\r\nimport {useSelector} from 'react-redux'\r\n\r\n\r\nconst Map = () =>{\r\n    // const [stationsList,getStationsList] = useState([])\r\n    // const [hasLocation, setHasLocation] = useState(false)\r\n    // const [nearbyLocationList, getNearbyLocationList] = useState([])\r\n    const [currentLocation, setCurrentLocation] = useState([51.505, -0.09])\r\n    let [markers, setMarkers] = useState(null);\r\n    const zoom = 13\r\n    const stations = useSelector(state => state.stations)\r\n    const currentStationInfo = useSelector(state => state.currentStationInfo)\r\n    const statusList = [{code:0, status:'停止營運'},{code:1, status:'正常營運'},{code:2, status:'暫停營運'}]\r\n    const mapRef = useRef()   \r\n    const popupRef = useRef() \r\n        // 定位\r\n        useEffect(() => {\r\n            if (navigator.geolocation) {\r\n                navigator.geolocation.getCurrentPosition(position =>{\r\n                    setCurrentLocation([position.coords.latitude, position.coords.longitude])\r\n                }) \r\n            }\r\n        }, []);\r\n\r\n    const createClusterCustomIcon = function (cluster) {\r\n        return L.divIcon({\r\n          html: `<span>${cluster.getChildCount()}</span>`,\r\n          className: 'marker-cluster-custom',\r\n          iconSize: L.point(40, 40, true),\r\n        });\r\n      }           \r\n\r\n    // 取得目前位置後，在地圖上maker及取得附近1公里的自行車站點\r\n    useEffect(() => {\r\n        if(mapRef.current){\r\n            mapRef.current.setView(\r\n                currentLocation,\r\n                zoom\r\n            );\r\n            const userMarker = L.marker(currentLocation, {\r\n                icon:constants.positionIcon,\r\n            });\r\n            mapRef.current.addLayer(userMarker);                                    \r\n        }        \r\n    }, [currentLocation,zoom]); \r\n\r\n    useEffect(() => {\r\n         //把取得的站點資訊放入popup中  \r\n        if(stations && stations.length){\r\n            setMarkers(stations.map(item=>(\r\n                <Marker position={[item.StationPosition.PositionLat,item.StationPosition.PositionLon]} icon={constants.spotIcon}  key={item.StationUID}>\r\n                    <Popup ref={popupRef}>\r\n                        <div className=\"station-name\">{item.StationName.Zh_tw}</div>\r\n                        <div className=\"station-address\">{item.StationAddress.Zh_tw}</div>\r\n                        <div className=\"station-updated-time\">{item.UpdateTime.slice(0,-9).replace(\"T\", \" \")}</div>\r\n                        <div className={'station-status' + (item.ServiceStatus === 2 ? \"closed \" : \"\") + (item.ServiceStatus === 0 ? 'stop ' : '')}>{statusList.find(element=>element.code === item.ServiceStatus).status}</div>\r\n                        <div className=\"station-availability\">\r\n                            <div className=\"rent\">\r\n                                <div className=\"name\">可借單車</div> \r\n                                <div className=\"number\">{item.AvailableRentBikes}</div>\r\n                            </div>\r\n                            <div className=\"return\">\r\n                                <div className=\"name\">可停空位</div>\r\n                                <div className=\"number\">{item.AvailableReturnBikes}</div>\r\n                            </div>                                             \r\n                        </div>\r\n                    </Popup>\r\n                </Marker>\r\n            )))                 \r\n        }\r\n    }, [stations]);\r\n\r\n    //根據搜尋結果移至目標位置\r\n    useEffect(() => {\r\n        if(mapRef && mapRef.current && stations && stations.length){\r\n            mapRef.current.flyTo([stations[0].StationPosition.PositionLat,stations[0].StationPosition.PositionLon], 15) \r\n        }\r\n    }, [markers,stations]);\r\n\r\n    //根據點選的站點讓地圖移動到該點\r\n    useEffect(() => {\r\n        if(currentStationInfo){\r\n            setMarkers(\r\n                <Marker position={[currentStationInfo.StationPosition.PositionLat,currentStationInfo.StationPosition.PositionLon]} icon={constants.spotIcon}  key={currentStationInfo.StationUID}>\r\n                    <Popup ref={popupRef} open={true}>\r\n                        <div className=\"station-name\">{currentStationInfo.StationName.Zh_tw}</div>\r\n                        <div className=\"station-address\">{currentStationInfo.StationAddress.Zh_tw}</div>\r\n                        <div className=\"station-updated-time\">{currentStationInfo.UpdateTime.slice(0,-9).replace(\"T\", \" \")}</div>\r\n                        <div className={'station-status' + (currentStationInfo.ServiceStatus === 2 ? \"closed \" : \"\") + (currentStationInfo.ServiceStatus === 0 ? 'stop ' : '')}>{statusList.find(element=>element.code === currentStationInfo.ServiceStatus).status}</div>\r\n                        <div className=\"station-availability\">\r\n                            <div className=\"rent\">\r\n                                <div className=\"name\">可借單車</div> \r\n                                <div className=\"number\">{currentStationInfo.AvailableRentBikes}</div>\r\n                            </div>\r\n                            <div className=\"return\">\r\n                                <div className=\"name\">可停空位</div>\r\n                                <div className=\"number\">{currentStationInfo.AvailableReturnBikes}</div>\r\n                            </div>                                             \r\n                        </div>\r\n                    </Popup>\r\n                </Marker>                \r\n            )\r\n            popupRef.current.setLatLng([currentStationInfo.StationPosition.PositionLat,currentStationInfo.StationPosition.PositionLon])\r\n            console.log(popupRef);\r\n            // popupRef.current.leafletElement.openPopup()\r\n        }\r\n    }, [currentStationInfo]);\r\n\r\n    return(\r\n        <MapContainer className=\"map markercluster-map\" ref={mapRef} useFlyTo={true} zoom={zoom} center={currentLocation} scrollWheelZoom whenCreated={mapInstance => { mapRef.current = mapInstance }}>\r\n            <TileLayer\r\n                attribution='&copy; <a href=\"http://osm.org/copyright\">OpenStreetMap</a> contributors'\r\n                url=\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\r\n            />\r\n            <MarkerClusterGroup chunkedLoading iconCreateFunction={createClusterCustomIcon}>\r\n                {markers}    \r\n            </MarkerClusterGroup>   \r\n        </MapContainer>\r\n    );\r\n}\r\nexport default Map;","var _path;\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nimport * as React from \"react\";\n\nfunction SvgUnion(_ref, svgRef) {\n  let {\n    title,\n    titleId,\n    ...props\n  } = _ref;\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 16,\n    height: 10,\n    viewBox: \"0 0 16 10\",\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M14.6667 10L16 8.57143L8 -3.49691e-07L-3.74669e-07 8.57143L1.33333 10L8 2.85714L14.6667 10Z\",\n    fill: \"#262626\"\n  })));\n}\n\nconst ForwardRef = /*#__PURE__*/React.forwardRef(SvgUnion);\nexport default __webpack_public_path__ + \"static/media/union.04e6400c.svg\";\nexport { ForwardRef as ReactComponent };","var _path;\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nimport * as React from \"react\";\n\nfunction SvgSearch(_ref, svgRef) {\n  let {\n    title,\n    titleId,\n    ...props\n  } = _ref;\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 24,\n    height: 24,\n    viewBox: \"0 0 24 24\",\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    fillRule: \"evenodd\",\n    clipRule: \"evenodd\",\n    d: \"M4 11C4 7.13401 7.13401 4 11 4C14.866 4 18 7.13401 18 11C18 14.866 14.866 18 11 18C7.13401 18 4 14.866 4 11ZM11 2C6.02944 2 2 6.02944 2 11C2 15.9706 6.02944 20 11 20C13.125 20 15.078 19.2635 16.6177 18.0319L20.2929 21.7071C20.6834 22.0976 21.3166 22.0976 21.7071 21.7071C22.0976 21.3166 22.0976 20.6834 21.7071 20.2929L18.0319 16.6177C19.2635 15.078 20 13.125 20 11C20 6.02944 15.9706 2 11 2Z\",\n    fill: \"#262626\"\n  })));\n}\n\nconst ForwardRef = /*#__PURE__*/React.forwardRef(SvgSearch);\nexport default __webpack_public_path__ + \"static/media/search.a12c76df.svg\";\nexport { ForwardRef as ReactComponent };","import React, { useState, useEffect, useRef } from \"react\";\r\nimport { useDispatch, useSelector  } from 'react-redux';\r\nimport styled from \"@emotion/styled\";\r\nimport { ReactComponent as Union } from '../assets/images/union.svg';\r\nimport { ReactComponent as Search } from '../assets/images/search.svg';\r\nimport Select from 'react-select'\r\nimport jsSHA from 'jssha';\r\n\r\nconst SearchContainer = styled.div`\r\nmin-width: 350px;\r\nbackground-color: #FFFFFF;\r\ndisplay: flex;\r\nflex-direction: column;\r\npadding:24px 24px 16px 24px;\r\n`\r\n\r\nconst SearchWrapper = styled.div`\r\nflex:0;\r\nbox-sizing: border-box;\r\nbox-shadow: 0px 0px 10px rgba(38, 38, 38, 0.25);\r\nborder-radius: 8px;\r\nposition: relative;\r\n`\r\n\r\nconst SearchBar = styled.div`\r\nbackground-color: #FFFFFF;\r\nborder-radius: 8px;\r\ntext-align: left;\r\nfont-weight: bold;\r\npadding: 16px;\r\nfont-size: 32px;\r\ncolor: #0A4259;\r\n\r\n    .union {\r\n        width: 24px;\r\n        height: 24px;\r\n        margin-left: 16px;\r\n        & > path {\r\n            fill: #0E5978;       \r\n        }\r\n    }\r\n  \r\n`\r\nconst SearchTop = styled.div`\r\nwidth: 100%;\r\npadding: 0;\r\nbackground: #0E5978;\r\nheight: 24px;\r\nborder-radius: 8px 8px 0 0;\r\n`\r\n\r\nconst SearchResult = styled.div`\r\nflex:1;\r\nmargin-top: 6px;\r\npadding: 0 24px;\r\nbox-sizing: border-box;\r\noverflow-x: hidden;\r\noverflow-y: scroll;\r\nheight: 80%;\r\n`\r\n\r\nconst SearchResultItem = styled.div`\r\ncursor: pointer;\r\nbackground: #F6F6F6;\r\nborder-radius: 8px;\r\npadding: 16px 8px;\r\nmargin: 6px 0;\r\n`\r\n\r\nconst SerachInput = styled.input`\r\nwidth: calc(100% - 48px);\r\nheight: 40px;\r\npadding-left: 38px;\r\nborder-radius: 4px;\r\nborder: 1px solid #0E5978;\r\ncolor: #676767;\r\nfont-size: 16px;\r\n`\r\nconst SearchFooter = styled.div`\r\ndisplay: flex;\r\npadding: 12px 24px 20px 24px;\r\n`\r\nconst SearchCountyList = styled.div`\r\nwidth: 100%;\r\nmargin-right: 12px;\r\n`\r\n\r\nconst SearchBtn = styled.button`\r\nwidth: 100%;\r\nbackground-color: #0E5978;\r\ncolor: #FFFFFF;\r\ncursor: pointer;\r\n`\r\n\r\nconst SearchPagination = styled.div`\r\nposition: sticky;\r\ndisplay: flex;\r\njustify-content: center;\r\nalign-items: center;\r\nmargin:20px 0;\r\n`\r\n\r\nconst Pagination = styled.div`\r\nbackground: #F6F6F6;\r\nborder: 1px solid #A5A5A5;\r\nfont-size:14px;\r\npadding: 10px 12px 9px; \r\nborder-radius: 4px;\r\n`\r\n\r\nconst CarouselArrowRight = styled.div`\r\nborder-radius: 50%;\r\n\r\n    &:after{\r\n        content: '';\r\n        display: inline-block;\r\n        margin-top: 0.8em;\r\n        margin-left: 0.6em;\r\n        width: 1em;\r\n        height: 1em;\r\n        border-top: 0.5em solid #cccccc;\r\n        border-right: 0.5em solid #cccccc;\r\n        transform: rotate(45deg);\r\n        color:#cccccc;\r\n    }\r\n`\r\n\r\nconst CarouselArrowLeft = styled.div`\r\nborder-radius: 50%;\r\n\r\n    &:after{\r\n        content: '';\r\n        display: inline-block;\r\n        margin-top: 0.8em;\r\n        margin-left: 0.6em;\r\n        width: 1em;\r\n        height: 1em;\r\n        border-top: 0.5em solid #cccccc;\r\n        border-right: 0.5em solid #cccccc;\r\n        transform: rotate(-135deg);\r\n        color:#cccccc;\r\n    }\r\n`\r\n\r\nconst SearchBlock = () =>{\r\n    const dispatch = useDispatch()\r\n    const [keyword, setKeyword] = useState('')\r\n    const [bikesInfoList, getBikesInfoList] = useState([])\r\n    const [bikesAvailableList, getBikeAvailableList] = useState([])\r\n    const [selectedCounty, handleSelect] = useState({label:'台北市',value:'Taipei'})\r\n    const [stationsList,getStationsList] = useState([])\r\n    const [arrowNumber,handleArrow] = useState(0)\r\n    const [isLeftArrowVisible,handleLeftArrowVisible] = useState(false)\r\n    const [isRightArrowVisible,handleRightArrowVisible] = useState(true)\r\n    const blockSelected = useRef('')\r\n    const stations = useSelector(state => state.stations)\r\n\r\n    const cityList =[\r\n        {label:'台北市',value:'Taipei'},\r\n        {label:'新北市',value:'NewTaipei'},\r\n        {label:'桃園市',value:'Taoyuan'},\r\n        {label:'苗栗縣',value:'MiaoliCounty'},\r\n        {label:'新竹市',value:'Hsinchu'},\r\n        {label:'台中市',value:'Taichung'},\r\n        {label:'臺南市',value:'Tainan'},\r\n        {label:'嘉義市',value:'Chiayi'},\r\n        {label:'高雄市',value:'Kaohsiung'},\r\n        {label:'屏東縣',value:'PingtungCounty'},\r\n        {label:'金門縣',value:'KinmenCounty'},\r\n    ]\r\n    const statusList = [{code:0, status:'停止營運'},{code:1, status:'正常營運'},{code:2, status:'暫停營運'}]\r\n    const ptxURL = 'https://ptx.transportdata.tw/MOTC/v2/Bike'\r\n    \r\n    const getAuthorizationHeader = () =>{\r\n        const AppID = '675dad84079841b3a881006714b3d91e'\r\n        const AppKey= 'D0MV31l-dasLMnv5qe9Ly56Rm6Y'        \r\n        let GMTString = new Date().toGMTString();\r\n        let ShaObj = new jsSHA('SHA-1', 'TEXT');\r\n        ShaObj.setHMACKey(AppKey, 'TEXT');\r\n        ShaObj.update('x-date: ' + GMTString);\r\n        let HMAC = ShaObj.getHMAC('B64');\r\n        let Authorization = 'hmac username=\"' + AppID + '\", algorithm=\"hmac-sha1\", headers=\"x-date\", signature=\"' + HMAC + '\"';\r\n        return { 'Authorization': Authorization, 'X-Date': GMTString }; \r\n    }\r\n\r\n    const handleSearch = async () =>{\r\n        // 取得所選縣市及關鍵字的自行車資訊\r\n       await fetch(`${ptxURL}/Station/${selectedCounty.value}?$top=30&$filter=contains(StationName/Zh_tw,'${keyword}')&$format=JSON`,\r\n        {\r\n           headers: getAuthorizationHeader()\r\n        }).then(res=>res.json())\r\n        .then(function (response) {\r\n            getBikesInfoList(response)          \r\n        })\r\n        .catch(function (error) {\r\n            console.log(error);\r\n        });\r\n\r\n         // 取得該站點的車數資訊(可歸還及可租借)\r\n        fetch(`${ptxURL}/Availability/${selectedCounty.value}?$top=30&$format=JSON`,\r\n        {\r\n            headers: getAuthorizationHeader()\r\n        }).then(res=>res.json())\r\n        .then(function (response) {\r\n            getBikeAvailableList(response)                             \r\n        })\r\n        .catch(function (error) {\r\n            console.log(error);\r\n        });            \r\n    }\r\n\r\n    // 把站點的車數資訊放入state中供其他components使用\r\n    useEffect(() => {\r\n        dispatch({\r\n            type: 'GET_BIKES_INFORMATION_LIST',\r\n            payload: { bikesInfoList, bikesAvailableList },\r\n        });\r\n    }, [bikesInfoList, bikesAvailableList, dispatch]);\r\n\r\n    // 一開始得到資料時\r\n    useEffect(() => {\r\n        handleArrow(0)\r\n    }, [stations]);\r\n\r\n    useEffect(() => {        \r\n        const splitArray =[]\r\n        if(stations && stations.length){\r\n            for(let i= 0, len= stations.length; i< len; i+=6){\r\n                splitArray.push(stations.slice(i,i+6));\r\n             }          \r\n             getStationsList(splitArray)  \r\n        }\r\n    }, [stations]);\r\n\r\n    // 分頁功能\r\n    useEffect(() => {\r\n        if(arrowNumber <= 0){\r\n            handleLeftArrowVisible(false)\r\n            handleRightArrowVisible(true)\r\n        }else if(arrowNumber === stationsList.length -1){\r\n            handleRightArrowVisible(false)\r\n        }else{\r\n            handleLeftArrowVisible(true)\r\n            handleRightArrowVisible(true)\r\n        }\r\n    }, [arrowNumber,stations]);\r\n\r\n    // 切換分頁\r\n    const handleNumberChange = (value) =>{\r\n        if(value + arrowNumber < stationsList.length){\r\n            handleArrow(value + arrowNumber)\r\n        } \r\n    } \r\n\r\n    const handleClick = (item) =>{\r\n        dispatch({\r\n            type: 'SET_CURRENT_STATION',\r\n            payload: { currentStationInfo:item },\r\n        });\r\n    }\r\n\r\n    return(\r\n        <>\r\n            <SearchContainer className=\"search-container\">\r\n                <SearchWrapper>\r\n                    <SearchTop/>\r\n                    <SearchBar>\r\n                        尋找單車<Union className=\"union\"/>\r\n                    </SearchBar>\r\n                    <div className=\"search-input\">    \r\n                        <Search className=\"search\"/>\r\n                        <SerachInput defaultValue={keyword} placeholder=\"請輸入關鍵字\" onChange={e => setKeyword(e.target.value)}>\r\n                        </SerachInput>\r\n                    </div>\r\n                    <SearchFooter>\r\n                        <SearchCountyList>\r\n                            <Select options={cityList} defaultValue={cityList[0]}  onChange={e => handleSelect({label: e.label, value: e.value})}/>\r\n                        </SearchCountyList>\r\n                        <SearchBtn onClick={()=> handleSearch()}>\r\n                            搜尋\r\n                        </SearchBtn>\r\n                    </SearchFooter>\r\n                </SearchWrapper>\r\n                <SearchResult className={stationsList && stationsList.length?'':'display-none'}>   \r\n                {\r\n                    stationsList && stationsList.length && stationsList[arrowNumber].map(item=>{\r\n                        return(\r\n                            <SearchResultItem key={item.StationName.Zh_tw} onClick={()=> handleClick(item)}> \r\n                                <div className=\"station-name\">{item.StationName.Zh_tw}</div>\r\n                                <div className=\"search-station-address\">{item.StationAddress.Zh_tw}</div>\r\n                                <div className={'station-status' + (item.ServiceStatus === 2 ? \"closed \" : \"\") + (item.ServiceStatus === 0 ? 'stop ' : '')}>{statusList.find(element=>element.code === item.ServiceStatus).status}</div>\r\n                            </SearchResultItem>\r\n                        )\r\n                    })\r\n                }\r\n                </SearchResult>\r\n                <SearchPagination>\r\n                    <CarouselArrowLeft isArrowVisible={true} ref={blockSelected} onClick={(event)=> handleNumberChange(-1)} \r\n                    style= {{display: isLeftArrowVisible ? 'inline-block':'none'}} className={stationsList && stationsList.length?'':'display-none'}/>\r\n                    <Pagination className={stationsList && stationsList.length?'':'display-none'}>\r\n                        {arrowNumber + 1}/ {stationsList.length}\r\n                    </Pagination>\r\n                    <CarouselArrowRight ref={blockSelected}  onClick={()=> handleNumberChange(1)}\r\n                    style={{display: isRightArrowVisible && stationsList && stationsList.length ? 'inline-block':'none'}} className={stationsList && stationsList.length?'':'display-none'}/>\r\n                </SearchPagination>\r\n            </SearchContainer>\r\n        </>\r\n    )\r\n}\r\nexport default SearchBlock;","const GET_BIKES_INFORMATION_LIST = 'GET_BIKES_INFORMATION_LIST';\r\nconst SET_CURRENT_STATION = 'SET_CURRENT_STATION';\r\n\r\nconst initState = {\r\n  bikesInfoList: [],\r\n  bikesAvailableList:[]\r\n};\r\n\r\nconst reduce = (state = initState, action) => {\r\n  switch (action.type) {\r\n    case GET_BIKES_INFORMATION_LIST: {\r\n      let arr = [];\r\n      action.payload.bikesInfoList.forEach((item)=>{\r\n         const idx = action.payload.bikesAvailableList.findIndex((element)=>element.StationUID === item.StationUID)\r\n        if(idx !== -1){\r\n          arr.push({...item,...action.payload.bikesAvailableList[idx]})\r\n        }\r\n      })\r\n      return {\r\n        ...state,\r\n        stations: [\r\n          ...arr\r\n        ],\r\n      };\r\n    }\r\n    case SET_CURRENT_STATION:{\r\n      return{\r\n        currentStationInfo: action.payload.currentStationInfo\r\n      }\r\n    }\r\n    default:\r\n      return state;\r\n  }\r\n};\r\nexport default reduce;","import './App.css';\nimport Header from './components/Header';\nimport Map from './components/Map'\nimport SearchBlock from './components/SearchBlock';\nimport { Provider } from \"react-redux\";\nimport { createStore } from \"redux\";\nimport styled from \"@emotion/styled\";\nimport reduce from \"./components/redux/reduce\";\n\nconst store = createStore(reduce);\n\nconst Container = styled.div`\ndisplay: flex;\nposition: relative;\nheight: 90vh;\n`\n\nfunction App() {\n  return (\n    <div className=\"App\">\n      <Provider store={store}>\n        <Header/>\n        <Container>\n          <SearchBlock/>\n          <Map></Map>\n        </Container>\n      </Provider>\n    </div>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}